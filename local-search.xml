<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>UE4.26 Niagara Trail</title>
    <link href="/2023/06/10/426Trail/"/>
    <url>/2023/06/10/426Trail/</url>
    
    <content type="html"><![CDATA[<h1 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h1><p>继承自 AnimNotifyState_TimedNiagaraEffect 类</p><p>meta属性 AnimNotifyBoneName = “true”  可以自动搜索骨骼名字</p><p>PS : 4.26版本需要添加一个 UFXSystemComponent* 用于接收Spawn的Niagara组件<br>       并且需要手写UV算法</p><p>.h</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// Fill out your copyright notice in the Description page of Project Settings.</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;CoreMinimal.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;AnimNotifyState_TimedNiagaraEffect.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;NiagaraTrails.generated.h&quot;</span></span><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> */</span><br><span class="hljs-built_in">UCLASS</span>(Blueprintable, meta = (DisplayName = <span class="hljs-string">&quot;Niagara Trail&quot;</span>))<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NIAGARATRAIL_API</span> UNiagaraTrails : <span class="hljs-keyword">public</span> UAnimNotifyState_TimedNiagaraEffect<br>&#123;<br><span class="hljs-built_in">GENERATED_BODY</span>()<br><span class="hljs-keyword">protected</span>:<br><span class="hljs-built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadOnly,Category = NiagaraSystem,meta = (AnimNotifyBoneName = <span class="hljs-string">&quot;true&quot;</span>))<br>FName SocketA;<br><br><span class="hljs-built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadOnly,Category = NiagaraSystem,meta = (AnimNotifyBoneName = <span class="hljs-string">&quot;true&quot;</span>))<br>FName SocketB;<br><br><span class="hljs-built_in">UPROPERTY</span>()<br>UFXSystemComponent* NiagaraComponent;<br><br><span class="hljs-built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadOnly,Category = NiagaraSystem)<br>FName NiagaraParameter1 = <span class="hljs-string">&quot;TrailSocket1&quot;</span>;<br><br><span class="hljs-built_in">UPROPERTY</span>(EditAnywhere,BlueprintReadOnly,Category = NiagaraSystem)<br>FName NiagaraParameter2 = <span class="hljs-string">&quot;TrailSocket2&quot;</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">NotifyBegin</span><span class="hljs-params">(<span class="hljs-keyword">class</span> USkeletalMeshComponent * MeshComp, <span class="hljs-keyword">class</span> UAnimSequenceBase * Animation, <span class="hljs-type">float</span> TotalDuration)</span> <span class="hljs-keyword">override</span></span>;<br><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">NotifyTick</span><span class="hljs-params">(USkeletalMeshComponent * MeshComp, UAnimSequenceBase * Animation, <span class="hljs-type">float</span> FrameDeltaTime)</span></span>;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">NiagaraTrail</span><span class="hljs-params">(USkeletalMeshComponent* Mesh,UFXSystemComponent* Niagara)</span></span>;<br>&#125;;<br><br></code></pre></td></tr></table></figure><p>.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// Fill out your copyright notice in the Description page of Project Settings.</span><br><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;NiagaraTrails.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;Components/SkeletalMeshComponent.h&quot;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;Particles/ParticleSystemComponent.h&quot;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">UNiagaraTrails::NotifyBegin</span><span class="hljs-params">(USkeletalMeshComponent* MeshComp, UAnimSequenceBase* Animation, <span class="hljs-type">float</span> TotalDuration)</span></span><br><span class="hljs-function"></span>&#123;<br>NiagaraComponent = <span class="hljs-built_in">SpawnEffect</span>(MeshComp,Animation);<br><br><span class="hljs-keyword">if</span> (NiagaraComponent)<br>&#123;<br><span class="hljs-comment">// tag the component with the AnimNotify that is triggering the animation so that we can properly clean it up</span><br>NiagaraComponent-&gt;ComponentTags.<span class="hljs-built_in">AddUnique</span>(<span class="hljs-built_in">GetFName</span>());<br>&#125;<br>&#125;<br><br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">UNiagaraTrails::NotifyTick</span><span class="hljs-params">(USkeletalMeshComponent* MeshComp, UAnimSequenceBase* Animation, <span class="hljs-type">float</span> FrameDeltaTime)</span></span><br><span class="hljs-function"></span>&#123;<br>Super::<span class="hljs-built_in">NotifyTick</span>(MeshComp, Animation, FrameDeltaTime);<br><span class="hljs-built_in">NiagaraTrail</span>(MeshComp,NiagaraComponent);<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">UNiagaraTrails::NiagaraTrail</span><span class="hljs-params">(USkeletalMeshComponent* Mesh, UFXSystemComponent* Niagara)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">if</span>(Mesh &amp;&amp; Niagara)<br>&#123;<br>Niagara-&gt;<span class="hljs-built_in">SetVectorParameter</span>(NiagaraParameter1,Mesh-&gt;<span class="hljs-built_in">GetSocketLocation</span>(SocketA));<br>Niagara-&gt;<span class="hljs-built_in">SetVectorParameter</span>(NiagaraParameter2,Mesh-&gt;<span class="hljs-built_in">GetSocketLocation</span>(SocketB));<br><br>&#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><h1 id="Trail平铺UV"><a href="#Trail平铺UV" class="headerlink" title="Trail平铺UV"></a>Trail平铺UV</h1><p><img src="/2023/06/10/426Trail/Ribbon.png" alt="Ribbon"></p><p>NM Update Travel Distance</p><p><img src="/2023/06/10/426Trail/%E5%B9%B3%E9%93%BA1.png" alt="平铺1"></p><p>NM Trail</p><p><img src="/2023/06/10/426Trail/%E5%B9%B3%E9%93%BA2.png" alt="平铺2"></p><h1 id="完结撒花"><a href="#完结撒花" class="headerlink" title="完结撒花"></a>完结撒花</h1><p><img src="/2023/06/10/426Trail/TrailRen1.png" alt="TrailRen"></p><p><img src="/2023/06/10/426Trail/TrailRen.png" alt="TrailRen"></p><p><img src="/2023/06/10/426Trail/Preview.png" alt="Preview"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>UE5.2 Niagara-Decal Render</title>
    <link href="/2023/05/12/decal/"/>
    <url>/2023/05/12/decal/</url>
    
    <content type="html"><![CDATA[<h1 id="DecalRender"><a href="#DecalRender" class="headerlink" title="DecalRender"></a>DecalRender</h1><h2 id="DecalSize-对齐默认大小"><a href="#DecalSize-对齐默认大小" class="headerlink" title="DecalSize 对齐默认大小"></a>DecalSize 对齐默认大小</h2><p>默认Decal材质拖入场景时，它的Size是(128,256,256).<br>Ns中的Decal 与 默认Decal 的比例关系是 2:1.<br>要想和默认的Decal大小一致，那么DecalSize应该是 (256,512,512).</p><img src="/2023/05/12/decal/DecalSize2.jpg"><p>但是视差效果依然有BUG，需要修改旋转.</p><img src="/2023/05/12/decal/DecalSize.jpg"><h2 id="DecalRotator-修复视差错误"><a href="#DecalRotator-修复视差错误" class="headerlink" title="DecalRotator 修复视差错误"></a>DecalRotator 修复视差错误</h2><p>DecalRender 与 默认Decal 的旋转并不一致，需要手动调整，</p><img src="/2023/05/12/decal/Rotate3.jpg"><p>Orientation Vector 的 Z 改为 1 ，旋转空间 改为 Decal，然后旋转0.75.</p><img src="/2023/05/12/decal/Rotate2.jpg"><p>视差错误就修复好了.</p><img src="/2023/05/12/decal/Rotate.jpg"><h2 id="Binding"><a href="#Binding" class="headerlink" title="Binding"></a>Binding</h2><p>值得一提的是，在DecalRender中，并没有Dynamic参数,</p><p>只能通过 DecalFade  与 Color 传值给材质. RGBA + 1 ，共5个参数可用.</p><img src="/2023/05/12/decal/Binding.jpg"><img src="/2023/05/12/decal/Material.jpg"><h1 id="完结撒花"><a href="#完结撒花" class="headerlink" title="完结撒花"></a>完结撒花</h1>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Power</title>
    <link href="/2023/05/11/power/"/>
    <url>/2023/05/11/power/</url>
    
    <content type="html"><![CDATA[<p>I NEED MORE POWER</p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
